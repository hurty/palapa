<li data-controller="document-section" 
data-target="document.section"
data-document-section-url="<%= document_section_url(@conn, :update, @current_organization, @document.main_section_id) %>"
data-document-section-title="<%= @document.title %>" 
class="draggable-section-collidable">
  
  <ul data-target="document-section.pagesList document.draggableContainer" 
  class="document-section-list"
  data-document-section-id="<%= @document.main_section_id %>">
    <li data-action="click->document#clickPage"
      class="document-page draggable-collidable flex cursor-pointer py-2 pl-3 <%= if @conn.assigns[:page] && @page.section_id do %>hover:bg-grey-lightest<% else %>hover:bg-grey-lighter<% end %>">

      <span>
        <i class="fas fa-home text-xs text-grey mr-2"></i>
      </span>

      <%= link truncate_string(@document.title), to: document_page_path(@conn, :show, @current_organization, @document.main_page_id), 
      class: if(@conn.params["id"] == @document.main_page_id, do: "text-green font-bold", else: "text-grey-darker font-bold") %>
    </li>

    <%= for page <- Enum.reject(@section.pages, fn page -> page.id == @document.main_page_id end) do %>
      <%= render PalapaWeb.Document.PageView, "page.html", Map.put(assigns, :toc_page, page) %>
    <% end %>
  </ul>
</li>
